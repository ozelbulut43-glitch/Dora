<!doctype html>
<html lang="tr" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dora'nÄ±n DoÄŸum GÃ¼nÃ¼</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&amp;family=Quicksand:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .font-handwritten {
      font-family: 'Caveat', cursive;
    }

    .font-main {
      font-family: 'Quicksand', sans-serif;
    }

    /* Sky gradient background */
    .sky-bg {
      background: linear-gradient(180deg, 
        #87CEEB 0%, 
        #B0E0E6 30%, 
        #98D8C8 60%,
        #90EE90 100%
      );
    }

    /* Forest ground */
    .forest-ground {
      background: linear-gradient(180deg,
        transparent 0%,
        #228B22 20%,
        #1a6b1a 100%
      );
    }

    /* Message card */
    .message-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15),
                  0 0 0 1px rgba(255, 255, 255, 0.5) inset;
    }

    /* Magic button */
    .magic-btn {
      background: linear-gradient(135deg, #FF6B35 0%, #F7931E 50%, #FF6B35 100%);
      background-size: 200% 200%;
      animation: gradientShift 3s ease infinite;
      border-radius: 50px;
      box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4),
                  0 0 0 4px rgba(255, 255, 255, 0.3) inset;
      transition: all 0.3s ease;
    }

    .magic-btn:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 15px 40px rgba(255, 107, 53, 0.5),
                  0 0 0 4px rgba(255, 255, 255, 0.4) inset;
    }

    .magic-btn:active {
      transform: translateY(0) scale(0.98);
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Fox animation */
    .fox-container {
      animation: foxFloat 4s ease-in-out infinite;
    }

    @keyframes foxFloat {
      0%, 100% { transform: translateY(0) rotate(-2deg); }
      50% { transform: translateY(-15px) rotate(2deg); }
    }

    /* Tree sway */
    .tree {
      transform-origin: bottom center;
      animation: treeSway 6s ease-in-out infinite;
    }

    .tree:nth-child(2) { animation-delay: -2s; }
    .tree:nth-child(3) { animation-delay: -4s; }

    @keyframes treeSway {
      0%, 100% { transform: rotate(-1deg); }
      50% { transform: rotate(1deg); }
    }

    /* Message fade animation */
    .message-text {
      animation: messageFadeIn 0.8s ease-out;
    }

    @keyframes messageFadeIn {
      0% { 
        opacity: 0; 
        transform: translateY(30px) scale(0.9);
      }
      100% { 
        opacity: 1; 
        transform: translateY(0) scale(1);
      }
    }

    /* Sparkle effect */
    .sparkle {
      position: absolute;
      width: 10px;
      height: 10px;
      background: radial-gradient(circle, #FFD700 0%, transparent 70%);
      border-radius: 50%;
      animation: sparkle 1.5s ease-in-out infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* Confetti */
    .confetti {
      position: fixed;
      width: 12px;
      height: 12px;
      top: -20px;
      animation: confettiFall linear forwards;
      z-index: 1000;
    }

    @keyframes confettiFall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Butterfly */
    .butterfly {
      position: absolute;
      animation: butterflyFly 15s linear infinite;
    }

    @keyframes butterflyFly {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(100px, -50px) rotate(10deg); }
      50% { transform: translate(200px, 20px) rotate(-10deg); }
      75% { transform: translate(100px, -30px) rotate(5deg); }
      100% { transform: translate(0, 0) rotate(0deg); }
    }

    /* Cloud float */
    .cloud {
      animation: cloudFloat 20s linear infinite;
    }

    @keyframes cloudFloat {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(calc(100vw + 100%)); }
    }

    /* Heart pulse for final message */
    .heart-pulse {
      animation: heartPulse 1s ease-in-out infinite;
    }

    @keyframes heartPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Glow effect for birthday */
    .birthday-glow {
      text-shadow: 0 0 20px #FFD700,
                   0 0 40px #FFA500,
                   0 0 60px #FF6B35;
      animation: glowPulse 2s ease-in-out infinite;
    }

    @keyframes glowPulse {
      0%, 100% { 
        text-shadow: 0 0 20px #FFD700,
                     0 0 40px #FFA500,
                     0 0 60px #FF6B35;
      }
      50% { 
        text-shadow: 0 0 30px #FFD700,
                     0 0 60px #FFA500,
                     0 0 90px #FF6B35;
      }
    }

    /* Firefly */
    .firefly {
      position: absolute;
      width: 6px;
      height: 6px;
      background: radial-gradient(circle, #FFFF00 0%, #FFD700 50%, transparent 100%);
      border-radius: 50%;
      animation: fireflyGlow 3s ease-in-out infinite;
    }

    @keyframes fireflyGlow {
      0%, 100% { opacity: 0.3; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-main overflow-hidden">
  <div id="app" class="h-full w-full relative sky-bg overflow-auto"><!-- Clouds -->
   <div class="absolute top-10 left-0 cloud" style="animation-delay: 0s;">
    <svg width="120" height="60" viewbox="0 0 120 60" fill="white" opacity="0.8"><ellipse cx="30" cy="40" rx="30" ry="20" /> <ellipse cx="60" cy="30" rx="35" ry="25" /> <ellipse cx="90" cy="40" rx="30" ry="20" />
    </svg>
   </div>
   <div class="absolute top-20 left-0 cloud" style="animation-delay: -10s;">
    <svg width="100" height="50" viewbox="0 0 100 50" fill="white" opacity="0.6"><ellipse cx="25" cy="35" rx="25" ry="15" /> <ellipse cx="50" cy="25" rx="30" ry="20" /> <ellipse cx="75" cy="35" rx="25" ry="15" />
    </svg>
   </div><!-- Sun -->
   <div class="absolute top-8 right-8 md:right-16">
    <svg width="80" height="80" viewbox="0 0 80 80"><defs>
      <radialgradient id="sunGlow">
       <stop offset="0%" stop-color="#FFD700" />
       <stop offset="50%" stop-color="#FFA500" />
       <stop offset="100%" stop-color="#FF8C00" stop-opacity="0" />
      </radialgradient>
     </defs> <circle cx="40" cy="40" r="40" fill="url(#sunGlow)" opacity="0.5" /> <circle cx="40" cy="40" r="25" fill="#FFD700" /> <circle cx="40" cy="40" r="20" fill="#FFEB3B" />
    </svg>
   </div><!-- Fireflies -->
   <div class="firefly" style="top: 30%; left: 15%; animation-delay: 0s;"></div>
   <div class="firefly" style="top: 50%; left: 25%; animation-delay: 1s;"></div>
   <div class="firefly" style="top: 40%; right: 20%; animation-delay: 2s;"></div>
   <div class="firefly" style="top: 60%; right: 30%; animation-delay: 0.5s;"></div><!-- Trees Background -->
   <div class="absolute bottom-0 left-0 right-0 h-2/3 pointer-events-none"><!-- Far trees -->
    <svg class="absolute bottom-0 left-0 w-full h-full" preserveaspectratio="xMidYMax slice" viewbox="0 0 800 400"><!-- Tree 1 --> <g class="tree">
      <rect x="50" y="250" width="20" height="150" fill="#5D4037" />
      <polygon points="60,100 10,280 110,280" fill="#2E7D32" />
      <polygon points="60,150 20,250 100,250" fill="#388E3C" />
      <polygon points="60,180 30,230 90,230" fill="#43A047" />
     </g> <!-- Tree 2 --> <g class="tree">
      <rect x="150" y="280" width="25" height="120" fill="#5D4037" />
      <polygon points="162,130 100,310 225,310" fill="#1B5E20" />
      <polygon points="162,170 110,280 215,280" fill="#2E7D32" />
      <polygon points="162,200 125,250 200,250" fill="#388E3C" />
     </g> <!-- Tree 3 --> <g class="tree">
      <rect x="650" y="260" width="22" height="140" fill="#5D4037" />
      <polygon points="661,120 600,290 720,290" fill="#2E7D32" />
      <polygon points="661,160 610,260 710,260" fill="#388E3C" />
      <polygon points="661,190 630,230 690,230" fill="#43A047" />
     </g> <!-- Tree 4 --> <g class="tree">
      <rect x="730" y="290" width="18" height="110" fill="#5D4037" />
      <polygon points="739,160 690,310 790,310" fill="#1B5E20" />
      <polygon points="739,190 700,280 780,280" fill="#2E7D32" />
     </g> <!-- Ground --> <ellipse cx="400" cy="420" rx="450" ry="80" fill="#228B22" /> <ellipse cx="400" cy="400" rx="420" ry="60" fill="#2E7D32" />
    </svg>
   </div><!-- Grass and flowers -->
   <div class="absolute bottom-0 left-0 right-0 h-20 pointer-events-none">
    <svg class="w-full h-full" preserveaspectratio="xMidYMax slice" viewbox="0 0 400 80"><!-- Grass blades --> <g fill="#3CB371">
      <path d="M10,80 Q12,60 10,40 Q8,60 10,80" />
      <path d="M30,80 Q33,55 30,35 Q27,55 30,80" />
      <path d="M50,80 Q52,65 50,45 Q48,65 50,80" />
      <path d="M80,80 Q83,50 80,30 Q77,50 80,80" />
      <path d="M120,80 Q122,60 120,38 Q118,60 120,80" />
      <path d="M150,80 Q153,55 150,35 Q147,55 150,80" />
      <path d="M200,80 Q202,60 200,42 Q198,60 200,80" />
      <path d="M250,80 Q253,50 250,32 Q247,50 250,80" />
      <path d="M300,80 Q302,58 300,40 Q298,58 300,80" />
      <path d="M350,80 Q353,52 350,35 Q347,52 350,80" />
      <path d="M380,80 Q382,60 380,45 Q378,60 380,80" />
     </g> <!-- Small flowers --> <g>
      <circle cx="25" cy="55" r="4" fill="#FF69B4" />
      <circle cx="100" cy="50" r="3" fill="#FFD700" />
      <circle cx="180" cy="55" r="4" fill="#FF6B6B" />
      <circle cx="280" cy="48" r="3" fill="#9B59B6" />
      <circle cx="360" cy="52" r="4" fill="#3498DB" />
     </g>
    </svg>
   </div><!-- Realistic Fox -->
   <div class="fox-container absolute bottom-16 left-4 md:left-12 z-10">
    <svg width="180" height="160" viewbox="0 0 180 160"><!-- Fox body --> <ellipse cx="90" cy="120" rx="50" ry="30" fill="#D2691E" /> <!-- Fox chest (white) --> <ellipse cx="90" cy="125" rx="25" ry="18" fill="#FFF8DC" /> <!-- Back legs --> <ellipse cx="60" cy="140" rx="12" ry="15" fill="#CD853F" /> <ellipse cx="120" cy="140" rx="12" ry="15" fill="#CD853F" /> <!-- Front legs --> <rect x="70" y="130" width="12" height="25" rx="6" fill="#D2691E" /> <rect x="98" y="130" width="12" height="25" rx="6" fill="#D2691E" /> <!-- Paws --> <ellipse cx="76" cy="155" rx="8" ry="5" fill="#1a1a1a" /> <ellipse cx="104" cy="155" rx="8" ry="5" fill="#1a1a1a" /> <!-- Tail --> <path d="M30,100 Q10,80 25,60 Q45,70 55,100 Q45,115 30,100" fill="#D2691E" /> <path d="M25,65 Q35,75 40,90" stroke="#FFF8DC" stroke-width="8" fill="none" stroke-linecap="round" /> <!-- Head --> <ellipse cx="90" cy="70" rx="35" ry="30" fill="#D2691E" /> <!-- Ears --> <polygon points="60,50 50,15 75,40" fill="#D2691E" /> <polygon points="63,45 55,25 72,42" fill="#FFB6C1" /> <polygon points="120,50 130,15 105,40" fill="#D2691E" /> <polygon points="117,45 125,25 108,42" fill="#FFB6C1" /> <!-- Face markings --> <path d="M55,70 Q90,90 125,70 Q90,100 55,70" fill="#FFF8DC" /> <!-- Muzzle --> <ellipse cx="90" cy="85" rx="15" ry="10" fill="#FFF8DC" /> <!-- Nose --> <ellipse cx="90" cy="78" rx="6" ry="4" fill="#1a1a1a" /> <ellipse cx="88" cy="77" rx="2" ry="1" fill="#666" /> <!-- Eyes --> <ellipse cx="72" cy="60" rx="8" ry="9" fill="white" /> <ellipse cx="108" cy="60" rx="8" ry="9" fill="white" /> <ellipse cx="74" cy="61" rx="5" ry="6" fill="#4a3728" /> <ellipse cx="106" cy="61" rx="5" ry="6" fill="#4a3728" /> <ellipse cx="75" cy="60" rx="2" ry="2.5" fill="black" /> <ellipse cx="105" cy="60" rx="2" ry="2.5" fill="black" /> <ellipse cx="76" cy="58" rx="1" ry="1" fill="white" /> <ellipse cx="106" cy="58" rx="1" ry="1" fill="white" /> <!-- Eyebrows / markings --> <path d="M60,50 Q72,55 80,52" stroke="#8B4513" stroke-width="2" fill="none" /> <path d="M120,50 Q108,55 100,52" stroke="#8B4513" stroke-width="2" fill="none" /> <!-- Mouth --> <path d="M85,88 Q90,92 95,88" stroke="#1a1a1a" stroke-width="1.5" fill="none" /> <!-- Whiskers --> <g stroke="#3a3a3a" stroke-width="0.5">
      <line x1="75" y1="82" x2="55" y2="78" />
      <line x1="75" y1="85" x2="55" y2="85" />
      <line x1="75" y1="88" x2="55" y2="92" />
      <line x1="105" y1="82" x2="125" y2="78" />
      <line x1="105" y1="85" x2="125" y2="85" />
      <line x1="105" y1="88" x2="125" y2="92" />
     </g>
    </svg>
   </div><!-- Butterfly -->
   <div class="butterfly" style="top: 25%; left: 60%;">
    <svg width="30" height="25" viewbox="0 0 30 25"><ellipse cx="15" cy="15" rx="3" ry="8" fill="#333" /> <ellipse cx="8" cy="10" rx="7" ry="8" fill="#FF69B4" opacity="0.8">
      <animate attributename="ry" values="8;6;8" dur="0.3s" repeatcount="indefinite" />
     </ellipse> <ellipse cx="22" cy="10" rx="7" ry="8" fill="#FF69B4" opacity="0.8">
      <animate attributename="ry" values="8;6;8" dur="0.3s" repeatcount="indefinite" />
     </ellipse> <circle cx="8" cy="8" r="2" fill="#FFD700" /> <circle cx="22" cy="8" r="2" fill="#FFD700" />
    </svg>
   </div><!-- Main Content -->
   <div class="relative z-20 flex flex-col items-center justify-center min-h-full px-4 py-8"><!-- Message Card -->
    <div class="message-card p-6 md:p-10 max-w-lg mx-auto text-center relative"><!-- Sparkles around card -->
     <div class="sparkle" style="top: -10px; left: 20px; animation-delay: 0s;"></div>
     <div class="sparkle" style="top: 30px; right: -5px; animation-delay: 0.5s;"></div>
     <div class="sparkle" style="bottom: 20px; left: -8px; animation-delay: 1s;"></div>
     <div class="sparkle" style="bottom: -5px; right: 30px; animation-delay: 1.5s;"></div><!-- Message Display -->
     <div id="messageContainer" class="mb-6 min-h-[180px] flex items-center justify-center">
      <div id="messageText" class="message-text">
       <p class="text-2xl md:text-3xl font-handwritten text-gray-700 leading-relaxed">Merhaba <span id="recipientName" class="text-orange-500 font-bold">Dora</span>! ğŸ¦Š</p>
       <p class="text-lg md:text-xl text-gray-600 mt-4 font-medium">Seni bekleyen Ã¶zel bir sÃ¼rpriz var...</p>
       <p class="text-5xl mt-4">âœ¨</p>
      </div>
     </div><!-- Progress indicator -->
     <div id="progressContainer" class="flex justify-center gap-2 mb-6">
      <div class="w-3 h-3 rounded-full bg-orange-200" id="dot1"></div>
      <div class="w-3 h-3 rounded-full bg-orange-200" id="dot2"></div>
      <div class="w-3 h-3 rounded-full bg-orange-200" id="dot3"></div>
      <div class="w-3 h-3 rounded-full bg-orange-200" id="dot4"></div>
      <div class="w-3 h-3 rounded-full bg-orange-200" id="dot5"></div>
      <div class="w-3 h-3 rounded-full bg-orange-200" id="dot6"></div>
     </div><!-- Magic Button --> <button id="magicButton" class="magic-btn px-8 py-4 text-white font-bold text-lg md:text-xl tracking-wide"> ğŸŒŸ Dokunarak KeÅŸfet ğŸŒŸ </button> <!-- Click counter -->
     <p id="clickHint" class="text-sm text-gray-400 mt-4 font-medium">Butona dokun ve sÃ¼rprizi keÅŸfet!</p>
    </div>
   </div><!-- Confetti Container -->
   <div id="confettiContainer"></div>
  </div>
  <script>
    const defaultConfig = {
      recipient_name: 'Dora'
    };

    let config = { ...defaultConfig };
    let currentMessage = 0;

    const messages = [
      {
        text: `<p class="text-xl md:text-2xl font-handwritten text-gray-700 leading-relaxed">
                Merhaba <span class="text-orange-500 font-bold recipient-name">Dora</span>,
              </p>
              <p class="text-lg md:text-xl text-gray-600 mt-4 leading-relaxed">
                DoÄŸum gÃ¼nlerini insanlar bir kere kutlar... ne aptalca! ğŸ˜„
              </p>
              <p class="text-lg md:text-xl text-gray-600 mt-3 leading-relaxed">
                <span class="text-orange-500 font-semibold">Her gÃ¼n kutlu olsun senin!</span>
              </p>
              <p class="text-base text-gray-500 mt-4 leading-relaxed italic">
                Bunu sana yaptÄ±m... Her kendini kÃ¶tÃ¼ hissettiÄŸinde, bazen insanlar etrafÄ±nda olmazlar. 
                EkranÄ±n arkasÄ±nda, bazen ruhunun tam yanÄ±nda - <span class="text-orange-500">burada olacaÄŸÄ±m.</span>
              </p>
              <p class="text-lg text-orange-500 mt-3 font-semibold">
                Dokunman ve hissetmen yeterli ğŸ’•
              </p>`,
        emoji: 'ğŸ¦Š'
      },
      {
        text: `<p class="text-3xl md:text-4xl font-handwritten text-gray-700">
                BugÃ¼n
              </p>
              <p class="text-2xl md:text-3xl font-handwritten text-orange-500 mt-2 font-bold">
                Ã§ok gÃ¼zel gÃ¶rÃ¼nÃ¼yorsun
              </p>
              <p class="text-3xl md:text-4xl font-handwritten text-gray-700 mt-2">
                <span class="recipient-name">Dora</span>! âœ¨
              </p>
              <p class="text-6xl mt-4">ğŸ˜Š</p>`,
        emoji: 'ğŸ’«'
      },
      {
        text: `<p class="text-xl md:text-2xl font-handwritten text-gray-700">
                BugÃ¼n iyi hissedecek bir ÅŸeyler yapmadÄ±n mÄ±?
              </p>
              <p class="text-2xl md:text-3xl text-orange-500 mt-4 font-bold">
                Hadi dÄ±ÅŸarÄ± Ã§Ä±kÄ±p Ä°skender ye! ğŸ–
              </p>
              <p class="text-lg text-gray-500 mt-4 italic">
                (Biliyorum en sevdiÄŸin ğŸ˜‹)
              </p>`,
        emoji: 'ğŸ½ï¸'
      },
      {
        text: `<p class="text-xl md:text-2xl font-handwritten text-gray-700 leading-relaxed">
                EÄŸer iÅŸin iÃ§inden Ã§Ä±kamÄ±yorsan...
              </p>
              <p class="text-2xl md:text-3xl text-blue-500 mt-4 font-bold">
                â˜ï¸ Bulut'a ulaÅŸ! â˜ï¸
              </p>
              <p class="text-lg text-gray-600 mt-4">
                O seni <span class="text-orange-500 font-semibold">her zaman dinleyecektir</span> ğŸ’™
              </p>`,
        emoji: 'ğŸ¤—'
      },
      {
        text: `<p class="text-4xl md:text-5xl font-handwritten text-gray-700">
                Hey!
              </p>
              <p class="text-2xl md:text-3xl text-orange-500 mt-4 font-bold heart-pulse">
                Ä°yi ki varsÄ±n! ğŸ’•
              </p>
              <p class="text-6xl mt-4">ğŸ¦Šâ¤ï¸</p>`,
        emoji: 'ğŸ’–'
      },
      {
        text: `<p class="text-3xl md:text-4xl font-handwritten birthday-glow text-orange-500">
                ğŸ‚ DOÄUM GÃœNÃœN ğŸ‚
              </p>
              <p class="text-4xl md:text-5xl font-handwritten birthday-glow text-orange-500 mt-2">
                KUTLU OLSUN!
              </p>
              <p class="text-2xl md:text-3xl font-handwritten text-gray-700 mt-4">
                <span class="recipient-name">Dora</span>! ğŸ‰ğŸŠğŸ¦Š
              </p>
              <p class="text-5xl mt-4">ğŸğŸˆğŸ¥³</p>`,
        emoji: 'ğŸ‰',
        confetti: true
      }
    ];

    function updateProgressDots() {
      for (let i = 1; i <= 6; i++) {
        const dot = document.getElementById(`dot${i}`);
        if (i <= currentMessage) {
          dot.classList.remove('bg-orange-200');
          dot.classList.add('bg-orange-500');
        } else {
          dot.classList.remove('bg-orange-500');
          dot.classList.add('bg-orange-200');
        }
      }
    }

    function createConfetti() {
      const container = document.getElementById('confettiContainer');
      const colors = ['#FF6B35', '#FFD700', '#FF69B4', '#00CED1', '#9B59B6', '#3498DB', '#2ECC71', '#E74C3C'];
      const shapes = ['square', 'circle', 'triangle'];
      
      for (let i = 0; i < 150; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
          confetti.style.animationDelay = Math.random() * 0.5 + 's';
          
          const shape = shapes[Math.floor(Math.random() * shapes.length)];
          if (shape === 'circle') {
            confetti.style.borderRadius = '50%';
          } else if (shape === 'triangle') {
            confetti.style.width = '0';
            confetti.style.height = '0';
            confetti.style.borderLeft = '6px solid transparent';
            confetti.style.borderRight = '6px solid transparent';
            confetti.style.borderBottom = '12px solid ' + colors[Math.floor(Math.random() * colors.length)];
            confetti.style.backgroundColor = 'transparent';
          }
          
          container.appendChild(confetti);
          
          setTimeout(() => confetti.remove(), 5000);
        }, i * 20);
      }
    }

    function showMessage() {
      if (currentMessage >= messages.length) {
        currentMessage = 0;
      }

      const message = messages[currentMessage];
      const messageText = document.getElementById('messageText');
      const clickHint = document.getElementById('clickHint');
      const button = document.getElementById('magicButton');

      // Update message with animation
      messageText.style.animation = 'none';
      messageText.offsetHeight; // Trigger reflow
      messageText.style.animation = 'messageFadeIn 0.8s ease-out';
      
      let displayText = message.text;
      const recipientName = config.recipient_name || defaultConfig.recipient_name;
      displayText = displayText.replace(/class="recipient-name">[^<]*/g, `class="recipient-name">${recipientName}`);
      displayText = displayText.replace(/>Dora</g, `>${recipientName}<`);
      displayText = displayText.replace(/>Dora!/g, `>${recipientName}!`);
      
      messageText.innerHTML = displayText;

      currentMessage++;
      updateProgressDots();

      // Update hint text
      if (currentMessage < messages.length) {
        clickHint.textContent = `Mesaj ${currentMessage}/${messages.length} - Devam etmek iÃ§in dokun!`;
      } else {
        clickHint.textContent = 'BaÅŸtan baÅŸlamak iÃ§in tekrar dokun! ğŸ”„';
      }

      // Update button text
      if (currentMessage === messages.length) {
        button.innerHTML = 'ğŸŠ Tekrar BaÅŸlat ğŸŠ';
      } else {
        button.innerHTML = 'ğŸŒŸ Sonraki Mesaj ğŸŒŸ';
      }

      // Trigger confetti on last message
      if (message.confetti) {
        createConfetti();
      }
    }

    function onConfigChange(newConfig) {
      const recipientName = newConfig.recipient_name || defaultConfig.recipient_name;
      
      // Update displayed recipient name
      const recipientNameEl = document.getElementById('recipientName');
      if (recipientNameEl) {
        recipientNameEl.textContent = recipientName;
      }
      
      // Update all recipient name spans in current message
      document.querySelectorAll('.recipient-name').forEach(el => {
        el.textContent = recipientName;
      });
    }

    // Initialize
    document.getElementById('magicButton').addEventListener('click', showMessage);

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (newConfig) => {
          config = { ...config, ...newConfig };
          onConfigChange(config);
        },
        mapToCapabilities: (cfg) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (cfg) => new Map([
          ['recipient_name', cfg.recipient_name || defaultConfig.recipient_name]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ca78b9f66819841',t:'MTc3MDUxNjE1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
